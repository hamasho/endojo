{% extends 'mypage/base.html' %}

{% block mypage_content %}

<div class="vertical-space-30"></div>

<div class="col-md-offset-1 col-md-10">
  <div class="row">

    <div class="panel panel-info">

      <div class="panel-heading">User Profile</div>

      <div class="panel-body">
        <form action="{% url 'mypage:profile' %}"
              method="post" class="form-horizontal">
          {% csrf_token %}

          {% if info_form.language.errors %}
          <div class="alert alert-danger">
            {{ info_form.language.errors }}
          </div>
          {% endif %}
          <div class="form-group">
            <div class="col-md-3">
              <label for="id_language">Language:</label>
            </div>
            <div class="col-md-9">
              <select id="id_language" name="language" class="form-control">
                {% for x,y in info_form.fields.language.choices %}
                  <option value="{{ x }}"
                          {% if info_form.fields.language.value == x %}
                          selected
                          {% endif %}>
                  {{ y }}
                  </option>
                {% endfor %}
              </select>
            </div>
          </div>

          {% if info_form.birth_year.errors or info_form.birth_month.errors or info_form.birth_day.errors %}
          <div class="alert alert-danger">
            {{ info_form.birth_year.errors }}
            {{ info_form.birth_month.errors }}
            {{ info_form.birth_day.errors }}
          </div>
          {% endif %}
          <div class="form-group">
            <div class="col-md-3">
              <label for="id_age">Birth Date:</label>
            </div>
            <div class="col-md-3">
              <select id="id_birth_year" 
                      name="birth_year" class="form-control" autocomplete="off">
                {% for x,y in info_form.fields.birth_year.choices %}
                  <option value="{{ x }}"
                          {% if info_form.birth_year.value == x %}
                          selected="selected"
                          {% endif %}>
                  {{ y }}
                  </option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <select id="id_birth_month"
                      name="birth_month" class="form-control" autocomplete="off">
                {% for x,y in info_form.fields.birth_month.choices %}
                  <option value="{{ x }}"
                          {% if info_form.birth_month.value == x %}
                          selected="selected"
                          {% endif %}>
                  {{ y }}
                  </option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <select id="id_birth_day"
                      name="birth_day" class="form-control" autocomplete="off">
                {% for x,y in info_form.fields.birth_day.choices %}
                  <option value="{{ x }}"
                          {% if info_form.birth_day.value == x %}
                          selected
                          {% endif %}>
                  {{ y }}
                  </option>
                {% endfor %}
              </select>
            </div>
          </div>

          <hr>

          {% if form.email.errors %}
          <div class="alert alert-danger">
            {{ form.email.errors }}
          </div>
          {% endif %}
          <div class="form-group">
            <div class="col-md-3">
              <label for="id_password">Email:</label>
            </div>
            <div class="col-md-9">
              <input type="text"
                     id="id_email"
                     class="form-control"
                     name="email" value="{{ form.email.value }}">
            </div>
          </div>

          <hr>

          {% if pw_form.password.errors %}
          <div class="alert alert-danger">
            {{ pw_form.password.errors }}
          </div>
          {% endif %}
          <div class="form-group">
            <div class="col-md-3">
              <label for="id_password">Password:</label>
            </div>
            <div class="col-md-9">
              <input type="password"
                     id="id_password"
                     class="form-control"
                     name="password">
            </div>
          </div>

          {% if pw_form.new_password.errors %}
          <div class="alert alert-danger">
            {{ pw_form.new_password.errors }}
          </div>
          {% endif %}
          <div class="form-group">
            <div class="col-md-3">
              <label for="id_new_password">New Password:</label>
            </div>
            <div class="col-md-9">
              <input type="password"
                     id="id_new_password"
                     class="form-control"
                     name="new_password" value="{{ form.new_password.value }}">
            </div>
          </div>

          <button class="btn btn-info pull-right" type="submit">
            Update
          </button>
        </form>
      </div>

    </div>

  </div>
</div>

{% endblock %}
